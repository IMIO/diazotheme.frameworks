<?xml version="1.0" encoding="utf-8"?>
<rules xmlns="http://namespaces.plone.org/diazo"
       xmlns:css="http://namespaces.plone.org/diazo/css"
       xmlns:xhtml="http://www.w3.org/1999/xhtml"
       xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- The condition makes sure that theme is only applied when served in the 
       plone main_template. This is necessary for functional edit popups in 
       Tiny, for example. -->
  <theme href="index.html" css:if-content="#visual-portal-wrapper"/>

  <!-- Head rules
       ================================================================== -->
  <!-- Create conditional comment IE detection -->
  <before css:theme="html">
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> </before>

<!-- Normally you would include the end of the conditional statement below here
     but since the html files included in the download already had the 
     conditionals around the html tag, you just need to insert the comments 
     outside of the html tag, because they get stripped by diazo. -->
<!--   <before css:theme-children="html"> -->
<!--<![endif]-->
<!--   </before> -->

  <!-- Attributes -->
  <copy attributes="*" css:theme="html" css:content="html"/>

  <!-- Get Plone favicons and touch icons. -->
  <replace css:theme="link[rel='shortcut icon']"  css:content="link[rel='shortcut icon']" />
  <replace css:theme="link[rel='apple-touch-icon']"  css:content="link[rel='apple-touch-icon']" />
  
  <!-- The css included here you would normally include in your own files and
       add to the theme html. In order to not adapt downloaded framework files
       in this case they've been added through this rules file. -->
  <after css:theme-children="head">
<style>
    body, input, select, textarea { background-color: #000; color: #ccc; }
    input, select, textarea { border: 1px solid #666;  -webkit-border-radius: .25em; -moz-border-radius: .25em; border-radius: .25em; padding: .25em }
    a { text-decoration: none; }
    h1 { font-size: 2.618em; line-height: 1.2em; }  
    h2 { font-size: 1.918em; line-height: 1.2em; }  
    h3 { text-transform:uppercase; letter-spacing:0.12em; }
    h3, h4, h5, h6 { font-weight: bold; }
    .documentDescription, .portletHeader { font-size: 1.309em; margin-bottom: 1em; }
    .portletHeader { border-bottom: 1px solid #666; margin: 1em 0; padding: 1em 0; text-align: center; }
    .portletHeader a { text-decoration: none; }
    .portletItem, .portletFooter { padding: 0 1em; }
    .portletCalendar table { width: 100%; text-align: right; }
    
    /* Layout */
    #portal-top, #portal-footer-wrapper { border-top: 1px solid #666; border-bottom: 1px solid #666; text-align: center; }
    #portal-top { position: relative; margin: 1em 0 3em; padding: 3em 0; }
    #portal-logo { background-color: #000; margin-left: -7.5em; position: absolute; top: -20px; width: 15em; }
    #portal-logo img { opacity: .7; }
    #portal-logo:hover img { opacity: 1; }
    #portal-searchbox { position: absolute; bottom: -0.8em; width: 100%; }
    #searchGadget { -webkit-border-radius: 2.5em; -moz-border-radius: 2.5em; border-radius: 2.5em; border: 1px solid #666; padding: .3em .75em .2em; width: 20em; }
    #portal-globalnav { margin: 0; font-size: 1.309em; width: 100%;  max-width: 100% }
    #portal-globalnav a { padding: 0 1.618em; }
    .selected a:hover, a:hover { color: #fff; }
    .selected a { color: #ccc; }
    #portal-breadcrumbs { margin-bottom: 3em; text-decoration: none; }
    #portal-footer-wrapper { margin: 0 0 3em; padding: 1em; position: relative; }
    #portal-footer, #portal-colophon, #portal-siteactions { width: 100%; text-align: center;}
    #portal-footer p, #portal-colophon ul, #portal-siteactions { margin: 1em auto;}
    #portal-footer-wrapper li, #portal-globalnav li { display: inline; }
    #portal-footer-wrapper a, #portal-globalnav a { text-decoration: none; }
    #portal-footer-wrapper li a { padding: 0 0 0 1.618em; }
    
    /* Columns */
    #visual-portal-wrapper { padding: 1.618em; margin: 0 auto; max-width: 60em; min-width: 15em;  }
    #portal-column-content { width: 28em; padding: 0 1em 3em; }
    #portal-column-one, #portal-column-two { width: 13em; padding: 0 1em 3em; }
    #portal-column-content, #portal-column-two, #portal-column-one { float: left; }
    #portal-footer-wrapper { clear: both; overflow: hidden; }
    
    @media screen and (min-width: 48.236em) and (max-width: 63.236em) {
        #visual-portal-wrapper { max-width: 45em; }
        #portal-column-two, #portal-column-one { float: right; }
    }
    
    @media screen and (min-width: 33.236em) and (max-width: 48.236em)  {
        #visual-portal-wrapper { max-width: 30em; }
    }
    
    @media screen and (max-width: 33.236em)  {
        #portal-column-content, #portal-column-two, #portal-column-one { float: none; max-width: 30em; width: auto; }
        #portal-globalnav a { display: block; width: auto; }
    }
    
</style>
  </after>

  <!-- Body rules
       ================================================================== -->

  <!-- Swap out the regular plone logo on the content side -->
  <replace css:content="#portal-logo > img">
    <img src="/++theme++goldilocks-framework/plone-white.png" height="32" width="123" alt="Plone" />
  </replace>

  <!-- Move the content body over to the theme side -->
  <replace css:theme="body" css:content="body"/>

  <!-- Clean -->
  <drop css:content="#portal-personaltools-wrapper"/>
  <drop css:content=".hiddenStructure"/>
  <drop css:content=".searchButton"/>
  <drop css:content=".searchSection"/>
  <drop css:content=".LSResult"/>
  <strip css:content=".LSBox"/>
  <drop css:content=".documentByLine"/>

  <drop css:content=".actionMenuContent"/>
  <drop css:content="#edit-bar"/>
  <drop css:content="#plone-lock-status"/>
  <strip css:content=".documentEditable"/>
  <drop css:content=".documentAuthor"/>
  <drop css:content=".documentModified"/>
  <drop css:content=".contentHistory"/>
  <drop css:content=".portletRecent"/>
  <drop css:content=".managePortletsLink"/>
  <drop css:content=".managePortletsFallback"/>

</rules>